<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: identity_server_workflow Pages: 1 -->
<svg width="848pt" height="395pt"
 viewBox="0.00 0.00 848.07 395.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 391)">
<title>identity_server_workflow</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-391 844.0666,-391 844.0666,4 -4,4"/>
<!-- user -->
<g id="node1" class="node">
<title>user</title>
<path fill="#f0ffff" stroke="#000000" d="M290.0666,-387C290.0666,-387 260.0666,-387 260.0666,-387 254.0666,-387 248.0666,-381 248.0666,-375 248.0666,-375 248.0666,-363 248.0666,-363 248.0666,-357 254.0666,-351 260.0666,-351 260.0666,-351 290.0666,-351 290.0666,-351 296.0666,-351 302.0666,-357 302.0666,-363 302.0666,-363 302.0666,-375 302.0666,-375 302.0666,-381 296.0666,-387 290.0666,-387"/>
<text text-anchor="middle" x="275.0666" y="-365.3" font-family="Times,serif" font-size="14.00" fill="#000000">User</text>
</g>
<!-- authorization_service -->
<g id="node5" class="node">
<title>authorization_service</title>
<path fill="#f0ffff" stroke="#000000" d="M441.0666,-270C441.0666,-270 301.0666,-270 301.0666,-270 295.0666,-270 289.0666,-264 289.0666,-258 289.0666,-258 289.0666,-246 289.0666,-246 289.0666,-240 295.0666,-234 301.0666,-234 301.0666,-234 441.0666,-234 441.0666,-234 447.0666,-234 453.0666,-240 453.0666,-246 453.0666,-246 453.0666,-258 453.0666,-258 453.0666,-264 447.0666,-270 441.0666,-270"/>
<text text-anchor="middle" x="371.0666" y="-248.3" font-family="Times,serif" font-size="14.00" fill="#000000">Autorization Service</text>
</g>
<!-- user&#45;&gt;authorization_service -->
<g id="edge4" class="edge">
<title>user&#45;&gt;authorization_service</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="1,5" d="M247.7744,-362.7885C221.492,-356.1886 184.5128,-345.0586 176.0666,-333 164.5927,-316.6187 163.2724,-303.3724 176.0666,-288 189.6023,-271.7367 235.0998,-262.7914 278.7436,-257.886"/>
<polygon fill="#0000ff" stroke="#0000ff" points="279.3168,-261.345 288.8928,-256.8117 278.5799,-254.3839 279.3168,-261.345"/>
<text text-anchor="middle" x="260.5666" y="-306.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">User Approval (Yes/No)</text>
</g>
<!-- service_config -->
<g id="node2" class="node">
<title>service_config</title>
<path fill="#f0ffff" stroke="#000000" d="M679.0666,-387C679.0666,-387 525.0666,-387 525.0666,-387 519.0666,-387 513.0666,-381 513.0666,-375 513.0666,-375 513.0666,-363 513.0666,-363 513.0666,-357 519.0666,-351 525.0666,-351 525.0666,-351 679.0666,-351 679.0666,-351 685.0666,-351 691.0666,-357 691.0666,-363 691.0666,-363 691.0666,-375 691.0666,-375 691.0666,-381 685.0666,-387 679.0666,-387"/>
<text text-anchor="middle" x="602.0666" y="-365.3" font-family="Times,serif" font-size="14.00" fill="#000000">Identity Server Config</text>
</g>
<!-- service_config&#45;&gt;authorization_service -->
<g id="edge1" class="edge">
<title>service_config&#45;&gt;authorization_service</title>
<path fill="none" stroke="#0000ff" d="M602.4099,-350.682C601.7011,-332.1015 597.5298,-303.8842 580.0666,-288 562.7434,-272.2432 511.0348,-263.2568 463.3888,-258.2029"/>
<polygon fill="#0000ff" stroke="#0000ff" points="463.5984,-254.7063 453.2971,-257.1831 462.8945,-261.6709 463.5984,-254.7063"/>
<text text-anchor="middle" x="720.0666" y="-321.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">Register Client</text>
<text text-anchor="middle" x="720.0666" y="-306.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">Define</text>
<text text-anchor="middle" x="720.0666" y="-291.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">Resources and/or Identity scopes</text>
</g>
<!-- client -->
<g id="node3" class="node">
<title>client</title>
<path fill="#f0ffff" stroke="#000000" d="M437.5666,-153C437.5666,-153 304.5666,-153 304.5666,-153 298.5666,-153 292.5666,-147 292.5666,-141 292.5666,-141 292.5666,-129 292.5666,-129 292.5666,-123 298.5666,-117 304.5666,-117 304.5666,-117 437.5666,-117 437.5666,-117 443.5666,-117 449.5666,-123 449.5666,-129 449.5666,-129 449.5666,-141 449.5666,-141 449.5666,-147 443.5666,-153 437.5666,-153"/>
<text text-anchor="middle" x="371.0666" y="-131.3" font-family="Times,serif" font-size="14.00" fill="#000000">Application (Client)</text>
</g>
<!-- authentication_service -->
<g id="node4" class="node">
<title>authentication_service</title>
<path fill="#f0ffff" stroke="#000000" d="M450.0666,-36C450.0666,-36 292.0666,-36 292.0666,-36 286.0666,-36 280.0666,-30 280.0666,-24 280.0666,-24 280.0666,-12 280.0666,-12 280.0666,-6 286.0666,0 292.0666,0 292.0666,0 450.0666,0 450.0666,0 456.0666,0 462.0666,-6 462.0666,-12 462.0666,-12 462.0666,-24 462.0666,-24 462.0666,-30 456.0666,-36 450.0666,-36"/>
<text text-anchor="middle" x="371.0666" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#000000">Authentication Service</text>
</g>
<!-- client&#45;&gt;authentication_service -->
<g id="edge2" class="edge">
<title>client&#45;&gt;authentication_service</title>
<path fill="none" stroke="#0000ff" d="M292.3588,-132.6533C191.8549,-128.8301 28.6387,-119.5163 10.0666,-99 -3.3555,-84.1728 -3.3555,-68.8272 10.0666,-54 27.3069,-34.955 169.1903,-25.5633 269.8465,-21.256"/>
<polygon fill="#0000ff" stroke="#0000ff" points="270.219,-24.7436 280.0645,-20.83 269.9274,-17.7497 270.219,-24.7436"/>
<text text-anchor="middle" x="130.0666" y="-87.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">Request Authentication</text>
<text text-anchor="middle" x="130.0666" y="-72.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">Request</text>
<text text-anchor="middle" x="130.0666" y="-57.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">Resources and/or Identity scopes</text>
</g>
<!-- client&#45;&gt;authorization_service -->
<g id="edge8" class="edge">
<title>client&#45;&gt;authorization_service</title>
<path fill="none" stroke="#0000ff" d="M371.0666,-153.2381C371.0666,-172.1601 371.0666,-201.9961 371.0666,-223.9267"/>
<polygon fill="#0000ff" stroke="#0000ff" points="367.5667,-223.9751 371.0666,-233.9752 374.5667,-223.9752 367.5667,-223.9751"/>
<text text-anchor="middle" x="491.0666" y="-204.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">Register to Server</text>
<text text-anchor="middle" x="491.0666" y="-189.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">requesting</text>
<text text-anchor="middle" x="491.0666" y="-174.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">Resources and/or Identity scopes</text>
</g>
<!-- authentication_service&#45;&gt;client -->
<g id="edge5" class="edge">
<title>authentication_service&#45;&gt;client</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="1,5" d="M304.7165,-36.0864C290.051,-41.4491 277.5275,-47.6089 273.0666,-54 261.6195,-70.4001 261.6195,-82.5999 273.0666,-99 276.5169,-103.9431 284.7901,-108.7479 295.1472,-113.1525"/>
<polygon fill="#0000ff" stroke="#0000ff" points="294.1292,-116.513 304.7165,-116.9136 296.6899,-109.9981 294.1292,-116.513"/>
<text text-anchor="middle" x="361.0666" y="-87.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">If Request scope</text>
<text text-anchor="middle" x="361.0666" y="-72.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">not in the registration</text>
<text text-anchor="middle" x="361.0666" y="-57.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">=&gt;Error (Invalid Client)</text>
</g>
<!-- authentication_service&#45;&gt;client -->
<g id="edge6" class="edge">
<title>authentication_service&#45;&gt;client</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="1,5" d="M430.5027,-36.2172C437.8511,-40.8808 444.4045,-46.7135 449.0666,-54 459.8457,-70.8467 459.8457,-82.1533 449.0666,-99 446.2256,-103.4402 442.6823,-107.3406 438.6848,-110.7655"/>
<polygon fill="#0000ff" stroke="#0000ff" points="436.4851,-108.0386 430.5027,-116.7828 440.6324,-113.6778 436.4851,-108.0386"/>
<text text-anchor="middle" x="549.0666" y="-87.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">If User did not</text>
<text text-anchor="middle" x="549.0666" y="-72.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">provided access</text>
<text text-anchor="middle" x="549.0666" y="-57.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">=&gt;Error (Access Denied)</text>
</g>
<!-- authentication_service&#45;&gt;client -->
<g id="edge7" class="edge">
<title>authentication_service&#45;&gt;client</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="1,5" d="M462.1961,-24.0646C537.1451,-30.0064 632.9449,-40.1815 645.0666,-54 658.2555,-69.0351 658.2555,-83.9649 645.0666,-99 632.8034,-112.9798 534.897,-123.2307 459.5799,-129.1417"/>
<polygon fill="#0000ff" stroke="#0000ff" points="459.2833,-125.6541 449.5815,-129.9116 459.8208,-132.6335 459.2833,-125.6541"/>
<text text-anchor="middle" x="735.5666" y="-80.3" font-family="Times,serif" font-size="14.00" fill="#0000ff">If Success</text>
<text text-anchor="middle" x="735.5666" y="-65.3" font-family="Times,serif" font-size="14.00" fill="#0000ff">=&gt;Send Access Token</text>
</g>
<!-- authorization_service&#45;&gt;user -->
<g id="edge3" class="edge">
<title>authorization_service&#45;&gt;user</title>
<path fill="none" stroke="#0000ff" d="M370.3789,-270.053C368.8128,-287.8911 363.9365,-315.0422 349.0666,-333 339.4614,-344.5997 325.2193,-352.7506 311.7876,-358.3261"/>
<polygon fill="#0000ff" stroke="#0000ff" points="310.3425,-355.1307 302.2284,-361.9433 312.8199,-361.6776 310.3425,-355.1307"/>
<text text-anchor="middle" x="472.0666" y="-314.3" font-family="Times,serif" font-size="14.00" fill="#0000ff">Request User Approval</text>
<text text-anchor="middle" x="472.0666" y="-299.3" font-family="Times,serif" font-size="14.00" fill="#0000ff">to client access the resource</text>
</g>
<!-- authorization_service&#45;&gt;client -->
<g id="edge9" class="edge">
<title>authorization_service&#45;&gt;client</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="1,5" d="M453.2017,-245.0009C518.8511,-238.5518 601.5898,-228.158 612.0666,-216 625.1223,-200.8492 625.1223,-186.1508 612.0666,-171 601.9417,-159.2503 524.3263,-149.1482 459.8696,-142.6621"/>
<polygon fill="#0000ff" stroke="#0000ff" points="459.9457,-139.1526 449.65,-141.6524 459.2574,-146.1187 459.9457,-139.1526"/>
<text text-anchor="middle" x="694.0666" y="-189.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">Send Identity Token</text>
</g>
<!-- authorization_service&#45;&gt;client -->
<g id="edge10" class="edge">
<title>authorization_service&#45;&gt;client</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="1,5" d="M289.0163,-240.784C260.5988,-235.0879 233.6798,-226.9949 225.0666,-216 212.733,-200.2558 212.733,-186.7442 225.0666,-171 232.9896,-160.8861 256.4021,-153.2278 282.2223,-147.6318"/>
<polygon fill="#0000ff" stroke="#0000ff" points="283.114,-151.0219 292.2088,-145.5872 281.7099,-144.1641 283.114,-151.0219"/>
<text text-anchor="middle" x="296.0666" y="-189.8" font-family="Times,serif" font-size="14.00" fill="#0000ff">Send Reflesh Token</text>
</g>
</g>
</svg>
