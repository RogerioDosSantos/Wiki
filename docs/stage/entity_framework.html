<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../resources/style.css">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="entity-framework">Entity Framework</h1>
<p>The <em>Entity Framework</em> servers an <a href="https://en.wikipedia.org/wiki/Object-relational_mapping">object-relational mapper (O/RM)</a>, enabling <em>.NET</em> developers to work with a <em>database</em> using <em>.NET</em> objects, and eliminating the need for most of the data-access code it usually need to write.</p>
<h2 id="ef-core-power-tools">EF Core Power Tools</h2>
<p>This is a <em>Visual Studio</em> plugin extension that among other allows you to emulate the database using the <em>Entity Framework</em>. With this tool you can visualize the database diagram and vizualise your changes before you apply it.</p>
<h3 id="installation">Installation</h3>
<ul>
<li><p>On the <em>Visual Studio Extension menu</em>. Click on add extension</p></li>
<li><p>Search for EF Core Power Tools and press download</p></li>
</ul>
<figure>
<img src="https://media.githubusercontent.com/media/RogerioDosSantos/Wiki/master/docs/src/entity_framework/ef_core_power_tools.png" />
</figure>
<ul>
<li><p>Close the all <em>Visual Studio instances</em>. Make sure that everything is closed including any debug console.</p></li>
<li><p>The VSIX windown press modify</p></li>
</ul>
<figure>
<img src="https://media.githubusercontent.com/media/RogerioDosSantos/Wiki/master/docs/src/entity_framework/ef_core_power_tools_installation.png" />
</figure>
<ul>
<li>The following will appear once the installation is completed</li>
</ul>
<figure>
<img src="https://media.githubusercontent.com/media/RogerioDosSantos/Wiki/master/docs/src/entity_framework/ef_core_power_tools_installation_completed.png" />
</figure>
<h3 id="vizualizing-the-database-context-diagram">Vizualizing the Database Context Diagram</h3>
<p>With the <em>EF Core Power Tools</em> installed, you can create a Database Context Diagram file that will allow you to graphically visualize all <em>Tables, Fields</em> and the relationship among them.</p>
<figure>
<img src="https://media.githubusercontent.com/media/RogerioDosSantos/Wiki/master/docs/src/entity_framework/ef_core_db_context_model_diagram.png" />
</figure>
<p>Note: This diagram is build based on the <em>Entity Framework interfaces configuration</em> (<em>IEntities interfaces</em>)</p>
<p>To add the <em>Database Context Diagram</em> into your project, <em>Right Click</em> in your <em>Project</em> &gt;&gt; <em>EF Core Power Tools</em> &gt;&gt; Add DbContextModel Diagram</p>
<figure>
<img src="https://media.githubusercontent.com/media/RogerioDosSantos/Wiki/master/docs/src/entity_framework/ef_core_db_context_model_diagram_add.png" />
</figure>
<h4 id="error-when-creating-the-diagram">Error when creating the diagram</h4>
<p>If you face an error when creating the diagram:</p>
<figure>
<img src="https://media.githubusercontent.com/media/RogerioDosSantos/Wiki/master/docs/src/entity_framework/ef_core_db_context_model_diagram_error.png" />
</figure>
<p>You can manually fix the <em>XML</em> code. For example the error above happened because <em>Visual Studio</em> was expecting the property <em>TenantId</em> to be without <em>quotes</em></p>
<figure>
<img src="https://media.githubusercontent.com/media/RogerioDosSantos/Wiki/master/docs/src/entity_framework/ef_core_db_context_model_diagram_error_fix.png" />
</figure>
<h4 id="enabling-the-legend-on-the-diagram">Enabling the legend on the Diagram</h4>
<p>Go to the <em>Filters</em> and select <em>Legend</em></p>
<figure>
<img src="https://media.githubusercontent.com/media/RogerioDosSantos/Wiki/master/docs/src/entity_framework/ef_core_db_context_model_diagram_legend.png" />
</figure>
<h2 id="database-migration-file">Database Migration File</h2>
<p>To update the database configuration the <em>Entity Framework</em> uses a migration file that is executed during the initialization of your project. To create a migration file with your changes execute the following:</p>
<ul>
<li>On <em>Visual Studio</em> go to <em>Tools</em> &gt;&gt; <em>NuGet Package Manager</em> &gt;&gt; <em>Package Manager Console</em></li>
</ul>
<figure>
<img src="https://media.githubusercontent.com/media/RogerioDosSantos/Wiki/master/docs/src/entity_framework/package_console_manager.png" />
</figure>
<ul>
<li>Select the project that the migration file will be created</li>
</ul>
<figure>
<img src="https://media.githubusercontent.com/media/RogerioDosSantos/Wiki/master/docs/src/entity_framework/package_console_manager_project.png" />
</figure>
<ul>
<li>Execute the command</li>
</ul>
<pre class="shell"><code>add-migration &lt;name_of_your_migration&gt;</code></pre>
<figure>
<img src="https://media.githubusercontent.com/media/RogerioDosSantos/Wiki/master/docs/src/entity_framework/add_migration_command.png" />
</figure>
<h2 id="references">References</h2>
<ul>
<li><a href="https://docs.microsoft.com/en-us/ef/core/">Entity Framework Core</a></li>
<li><a href="https://www.youtube.com/watch?v=qkJ9keBmQWo">Entity Framework Best Practices - Video</a></li>
</ul>
</body>
</html>
